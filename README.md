# Асинхронный Telegram-бот

Это асинхронный Telegram-бот, разработанный с использованием Python и PostgreSQL. Проект предоставляет удобный способ автоматизации задач в Telegram, включая обработку пользовательских запросов, взаимодействие с базой данных и управление мультимедийными ресурсами.

## Основные технологии

- **Язык программирования**: Python
- **Фреймворк для работы с Telegram API**: [aiogram](https://docs.aiogram.dev) (асинхронная библиотека для разработки Telegram-ботов).
- **База данных**: PostgreSQL
  - Используется для хранения данных о пользователях, запросах и другой необходимой информации.
- **Асинхронность**: Бот построен на базе asyncio, что позволяет эффективно обрабатывать множество запросов.
- **Docker**:
  - Контейнеризация приложения для удобства развертывания.
  - Использование `docker-compose` для управления сервисами.
- **Среда разработки и тестирования**:
  - Настраиваемые переменные окружения через `.env`.
  - Локальная и продакшн-среды с различными конфигурациями `docker-compose`.

## Функционал бота

- Отправка текстовых сообщений.
- Отправка мультимедиа (фото, видео).
- Обработка пользовательских команд.
- Управление клавиатурами (встроенные и инлайн-клавиатуры).
- Работа с базой данных для сохранения и извлечения пользовательских данных.

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/IsaevAndrew/async_bot_with_postgresql.git
cd async_bot_with_postgresql
```

### 2. Установка зависимостей

Для установки необходимых библиотек выполните команду:

```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения

Создайте файл `.env.prod` и `.env.local` на основе `.env.example`:

Укажите следующие параметры:

- `BOT_TOKEN`: токен Telegram-бота (получите у [BotFather](https://t.me/BotFather)).
- `DATABASE_URL`: строка подключения к PostgreSQL (например, `postgresql://user:password@localhost/db_name`).

### 4. Запуск с использованием Docker

Для запуска приложения с Docker используйте одну из следующих команд:

- **Локальная среда**:

  ```bash
  docker-compose -f docker-compose.local.yml --env-file .env up --build
  ```

- **Продакшн-среда**:

  ```bash
  docker-compose -f docker-compose.prod.yml --env-file .env up --build
  ```

### 5. Ручной запуск (без Docker)

Убедитесь, что PostgreSQL настроен и доступен. Затем выполните:

```bash
python bot.py
```

## Структура проекта

- **`bot.py`** — главный файл, содержащий логику работы бота.
- **`consts.py`** — хранит константы, используемые в коде.
- **`keyboards.py`** — определение клавиатур для взаимодействия с пользователями.
- **`texts.py`** — шаблоны текстов сообщений.
- **`db/`** — директория для работы с базой данных, включая SQL-запросы и миграции.
- **`photos/` и `videos/`** — директории для хранения мультимедийных файлов.

## Технологии в проекте

### 1. Python
- Используется для написания основной логики бота.
- Асинхронное программирование с библиотекой `asyncio` для высокой производительности.

### 2. aiogram
- Лёгкая и мощная библиотека для Telegram-ботов.
- Поддержка встроенных клавиатур, инлайн-кнопок и асинхронных обработчиков.

### 3. PostgreSQL
- Реляционная база данных для хранения и управления данными пользователей.
- Подключение осуществляется через `DATABASE_URL`.

### 4. Docker и Docker Compose
- Упрощённое развертывание приложения в изолированном контейнере.
- Возможность масштабирования и настройки окружений.

### 5. .env
- Использование переменных окружения для безопасного хранения конфиденциальной информации (например, токенов и данных подключения к базе).

## Возможные улучшения

- Добавление системы тестирования.
- Поддержка вебхуков для более быстрой обработки событий.
- Улучшение логирования.
